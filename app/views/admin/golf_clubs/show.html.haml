- content_for(:head){ "Admin - #{@golf_club.name} - "}
.container
  .row
    %ol.breadcrumb
      %li
        %a{ :href => admin_golf_clubs_path} Admin
      %li.active #{ @golf_club.name }
    %h1 Club Info
    .col-xs-12.col-md-8
      .card
        .card-header Title
        .card-block
          %p.card-text #{ @golf_club.name}
      .card
        .card-header Description
        .card-block
          = simple_format( @golf_club.description, { :class => 'card-text'})
      .card
        .card-header Address
        .card-block
          = simple_format( @golf_club.address, { :class => 'card-text'})
        .card-block#map{:style => "height: 40vh;"}
      .card
        .card-header Hours
        %ul.list-group.list-group-flush
          %li.list-group-item
            %strong Open Hour
            #{ @golf_club.open_hour.strftime("%H:%M") }
          %li.list-group-item
            %strong Close Hour
            #{ @golf_club.close_hour.strftime("%H:%M") }
    .col-md-4.col-xs-12
      .card
        .card-header Tools
        .card-block
          %a.card-link.btn.btn-primary{ :href => admin_golf_club_dashboard_path(@golf_club) } Dashboard
          %a.card-link.btn.btn-secondary{ :href => edit_admin_golf_club_path(@golf_club) } Edit
      .card
        .card-header Meta-Info
        %ul.list-group.list-group-flush
          %li.list-group-item
            %strong Created At
            #{ @golf_club.created_at }
          %li.list-group-item
            %strong Updated At
            #{ @golf_club.updated_at }
          %li.list-group-item
            %strong Owner
            #{ link_to @golf_club.user.name, user_path(@golf_club.user_id), { :target => "_blank"} }
          %li.list-group-item
            %strong URL
            #{ link_to golf_club_path(@golf_club), golf_club_path(@golf_club), { :target => "_blank"} }
  .row
    %h2 Pricing And Scheduling
    .col-xs-12.col-md-8
      - @golf_club.flight_schedules.each do |flight_schedule|
        .card
          .card-header Flight ID: #{ flight_schedule.id }
          %ul.list-group.list-group-flush
            %li.list-group-item
              %h4 Flight Settings
              %table.table
                %thead
                  %tr
                    %th Item
                    %th Value
                %tbody
                  %tr
                    %td Min Balls per Flight
                    %td #{ flight_schedule.min_pax }
                  %tr
                    %td Max Balls per Flight
                    %td #{ flight_schedule.max_pax }
            %li.list-group-item
              %h4 Pricing
              %table.table
                %thead
                  %tr
                    %th Item
                    %th Price
                %tbody
                  - prices = flight_schedule.charge_schedule
                  %tr
                    %td Flight
                    %td #{ number_to_currency(prices.session_price, :unit => "MYR ") }
                  %tr
                    %td Buggy
                    %td #{ number_to_currency(prices.cart, :unit => "MYR ") }
                  %tr
                    %td Caddy
                    %td #{ number_to_currency(prices.caddy, :unit => "MYR ") }
                  %tr
                    %td Insurance
                    %td #{ number_to_currency(prices.insurance, :unit => "MYR ") }
            %li.list-group-item
              %h4 Flight Days
              .btn-group{ :'data-toggle' => 'buttons'}
                - flight_schedule.flight_matrices.first.attributes.select{ |k,v| k.to_s.match(/day[1-7]/)}.map do |x,y|
                  %label.btn.btn-secondary{ :class => (y==1) ? "active" : "", :disabled => true }
                    #{ (x[3].to_i == 7) ? "Sunday" : DateTime::DAYNAMES[ (x[3].to_i)]}
              %h4 Flight Times
              .btn-group
                - flight_schedule.flight_matrices.each do |flight_matrix|
                  %button.btn.btn-secondary{ :type => 'button' } #{ flight_matrix.tee_time.strftime("%H:%M") }
  .row
    %h2 Amenities
    .col-xs-12.col-md-8
      %ul
        - @golf_club.amenity_listings.each do |amenity|
          %li{:class => amenity[:available] ? "" : "text-muted" } #{ amenity[:label]}
:javascript
  var map;
  var initMap = function(){
      map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: #{@golf_club.lat} , lng: #{@golf_club.lng} },
        scrollwheel:false,
        zoom: 16
      });

      var golfCircle = new google.maps.Circle({
        strokeColor: '#FF0000',
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: '#FF0000',
        fillOpacity: 0.35,
        map: map,
        center: {lat:#{@golf_club.lat}, lng:#{@golf_club.lng} },
        radius: 300
      });
  };
  initMap();
