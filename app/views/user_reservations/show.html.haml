- content_for(:head){"Reservation #{@reservation.token} - "}
.container
  .row
    .col-xs-12.col-md-6
      .card
        - if @reservation.payment_confirmed? && !@reservation.token.nil? then
          .card-block
            %img.center-block{ :src => RQRCode::QRCode.new(@reservation.token, :size => 4, :level => :h).to_img.resize(256,256).to_data_url }
        %ul.list-group.list-group-flush
          %li.list-group-item
            %strong Status:
            #{ @reservation.status }
          %li.list-group-item
            %strong Club:
            #{ @reservation.golf_club.name }
          %li.list-group-item
            %strong Flight Date and Time
            #{ @reservation.booking_date} @ #{@reservation.booking_time.strftime("%H:%M")}
          %li.list-group-item
            %strong Location
            #{ @reservation.golf_club.address } #{ link_to "link", "http://google.com.my/maps?q=#{@reservation.golf_club.address.html_safe}", :target => "_blank"}
          - if !@reservation.payment_confirmed? then
            %li.list-group-item
              %strong Note:
              We detect that you attempting to pay for this booking. If you lost the payment page, please wait around 10 minutes for the booking to be released again
      .card
        .card-header Details
        .card-block
          %table.table
            %thead
              %tr
                %th Qty
                %th Item
                %th Total Price
            %tbody
              %tr
                %td #{ @reservation.count_pax }
                %td Balls
                %td #{ number_to_currency(@reservation.actual_pax, { :unit => "RM "} )}
              %tr
                %td #{ @reservation.count_caddy}
                %td Caddy
                %td #{ number_to_currency(@reservation.actual_caddy, { :unit => "RM "} )}
              %tr
                %td #{ @reservation.count_buggy}
                %td Buggy
                %td #{ number_to_currency(@reservation.actual_buggy, { :unit => "RM "} )}
              %tr
                %td #{ @reservation.count_insurance }
                %td Insurance
                %td #{ number_to_currency(@reservation.actual_insurance, { :unit => "RM "} )}
              %tr
                %td{ :colspan => 2}
                  %h4 Total Price:
                %td
                  %h4 #{ number_to_currency(@reservation.total_price, { :unit => "RM "} )}
      .card
        .card-header Review
        - if @review.nil? && @show_review_form then
          .card-block
            %p.card-text You haven't review this flight yet.
            %a.btn.btn-primary{ :href => new_user_review_path(current_user, {topic_id:@reservation.id, topic_type:"UserReservation"}) } Review
        - elsif @review.nil? && !@show_review_form then
          .card-block
            %p.card-text You can give your review on this flight around 12 hours after the flight.
        - elsif !@review.nil? then
          %ul.list-group.list-group-flush
            = react_component("ReviewCard", { review:@review})
            - if current_user.id == @review["user_id"] then
              %li.list-group-item
                %a.btn.btn-primary{ :href => edit_user_review_path(current_user, @review["id"],
                  {topic_id:@review["topic_id"],   topic_type:@review["topic_type"]})} Edit Review
